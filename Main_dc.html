<!DOCTYPE html>
<html>
<head>
    <title>My jQM Demo</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>

    <script>
        var _apiKey = 'demo'
        var _contacts = null

        // gets the contact list from the server
        function getContacts(cb) {
            $.get(
                    'http://contacts.tinyapollo.com/contacts?key=' + _apiKey,
                    function(data) {
                        _contacts = data.contacts
                        cb()
                    }
            )
        }

        //home page before show
        $(document).on("pagebeforeshow", "#home_page", function() {
            var contactList = $('#contact_list')
            contactList.html("")
            getContacts(function() {
                for (var i in _contacts) {
                    var contact = _contacts[i]
                    contactList.append('<li><a href="#">' + contact.name + '</a></li>')
                }
                contactList.listview("refresh")
            })
        })

    </script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
</head>
<body>
<div data-role="page" id="home_page">
    <div data-role="header">
        <h1>My Demo</h1>
    </div>
    <div data-role="content">
        <ul data-role="listview" id="contact_list">
            <li>
                <a href="#">List Item 1</a>
            </li>
            <li>
                <a href="#">List Item 2</a>
            </li>
        </ul>
    </div>
</div>
</body>
</html>